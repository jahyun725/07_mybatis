<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
  Mapper Interface와 Mapper XML을 연동하는 방법
  1. 인터페이스(java폴더)와 xml(resources)이 동일한 경로에 같은 이름으로 존재
  2. 인터페이스의 풀 네임(패키지명 + 인터페이스명)을 namespace에 작성
  3. 인터페이스의 메서드명과 xml의 SQL id, 리턴 타입을 동일하게 작성
-->
<mapper namespace="com.ohgiraffers.section03.remix.MenuMapper">

  <select id="selectAllMenu" resultType="com.ohgiraffers.section03.remix.MenuDTO">
    SELECT
      menu_code,
      menu_name,
      menu_price,
      category_code,
      orderable_status
    FROM
      tbl_menu
    WHERE
      orderable_status = 'Y'
    ORDER BY
      menu_code ASC
  </select>


  <select id="selectMenuByMenuCode" resultType="MenuDTO">
    SELECT
      menu_code,
      menu_name,
      menu_price,
      category_code,
      orderable_status
    FROM
      tbl_menu
    WHERE
      menu_code = #{menuCode}
  </select>


  <insert id="insertMenu" parameterType="MenuDTO">
    INSERT INTO tbl_menu(
      menu_name,
      menu_price,
      category_code,
      orderable_status)
    VALUES(
      #{menuName},
      #{menuPrice},
      #{categoryCode},
      'Y'
    )

  </insert>


  <update id="updateMenu" parameterType="MenuDTO">
    UPDATE tbl_menu
      SET menu_name = #{ menuName }
      , menu_price = #{ menuPrice }
      , category_code = #{ categoryCode }
    WHERE menu_code = #{ menuCode }
  </update>

  <!-- parameterType은 optional(선택적) 속성으로
      작성되지 않으면 Mybatis의 TypeHandler가 알아서 추론함
   -->
  <delete id="deleteMenu">
    DELETE
    FROM tbl_menu
    WHERE menu_code = #{ menuCode }
  </delete>

</mapper>